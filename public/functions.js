function sleep(e){return new Promise((n=>setTimeout(n,e)))}async function buySlot(){let e=document.getElementById("modal-buy-button"),n=document.getElementById("modal-message");document.getElementById("modal-container");const t=n.innerHTML;n.innerHTML="Purchasing slot...",e.disabled=!0;try{const o=await fetch("/app/buy-slot"),a=await o.json();o.ok?!0===a.success?(n.innerHTML=a.message,e.remove(),console.log("[PaymentModule] - payment finished ok refreshing!!!"),e.remove()):!1===a.success&&(n.innerHTML=a.message,await sleep(5e3),n.innerHTML=t,e.disabled=!1):(console.log("[PaymentModule] - failed to buy slot, http error"),n.innerHTML="Failed to purchase slot. Please try again.",e.disabled=!1,await sleep(5e3),n.innerHTML=t)}catch(t){console.log("[PaymentModule] - error:",t),n.innerHTML="Failed to buy slot. Please try again later.",e.disabled=!1}}async function buyItem(e){let n=document.getElementById("modal-buy-button"),t=document.getElementById("modal-message"),o=(document.getElementById("modal-container"),document.getElementById("modal-customize-button"));const a=t.innerHTML;t.innerHTML="Purchasing items...",n.disabled=!0;const r=`/app/buy-item/${e}`;try{const e=await fetch(r),i=await e.json();e.ok?!0===i.success?(t.innerHTML=i.message,n.remove(),console.log("[PaymentModule] - payment finished ok refreshing!!!"),o.classList.remove("hidden")):!1===i.success&&(t.innerHTML=i.message,await sleep(5e3),t.innerHTML=a,n.disabled=!1):(console.log("[PaymentModule] - failed to buy item, http error"),t.innerHTML="Failed to purchase item. Please try again.",n.disabled=!1,await sleep(5e3),t.innerHTML=a)}catch(e){console.log("[PaymentModule] - error:",e),t.innerHTML="Failed to buy item. Please try again later.",n.disabled=!1}}function parseDescription(){let e=document.getElementById("description-parse").innerHTML.replace(/#W/g,"<br>");e=e.replace(/#B (.+?) #\/B/g,"<b>$1</b>"),e=e.replace(/#I (.+?) #\/I/g,"<i>$1</i>"),document.getElementById("description-parse").innerHTML=e,console.log(e)}function refresh(){return console.log("[functionsjs] - refreshing page!!!!!!!!!"),location.reload()}function abbreviate(e,n,t,o){return e=Number(e),!1!==(o=o||!1)?annotate(e,n,t,o):annotate(e,n,t,e>=1e12?"T":e>=1e9?"B":e>=1e6?"M":e>=1e3?"K":"")}function annotate(e,n,t,o){var a=0;switch(o){case"T":a=e/1e12;break;case"B":a=e/1e9;break;case"M":a=e/1e6;break;case"K":a=e/1e3;break;case"":a=e}!1!==n&&(new RegExp("\\.\\d{"+(n+1)+",}$").test(""+a)&&(a=a.toFixed(n)));return!1!==t&&(a=Number(a).toFixed(t)),a+o}function parseForum(){let e=document.getElementById("forum-parse");e&&(e.innerHTML=e.innerHTML.replace(/#misinformation/g,'<img src="/images/misinformation.gif" width="100"><br>')),document.querySelectorAll('[id^="forum-reply-"]').forEach((function(e){e.innerHTML=e.innerHTML.replace(/#misinformation/g,'<img src="/images/misinformation.gif" width="100"><br>')}))}function disableButton(e){e.disabled=!0}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".lazy-load").forEach((e=>{const n=e.getAttribute("data-src"),t=new Image;t.src=n,t.onload=()=>{e.src=n},t.onerror=()=>{console.error(`Failed to load image: ${n}`)}}))}));